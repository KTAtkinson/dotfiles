layoutname()
{
	echo $(xrandr | grep -w "connected" | cut -d " " -f 1 | sort | tr "\n" ":")
}

# preserve newlines in xrandr output
cmd=${XRANDR_CMD:-autorandr --load}
profile=$(layoutname)
defaultprofile=${DEFAULT_RANDR_PROFILE:-default}

echo "Applying config ${profile} using ${cmd}"
$cmd $profile

if [ "$?" -ne "0" ] 
then
	echo "Failed to load configuration.\nLoading default config, $defaultprofile."
	$cmd $defaultprofile
fi

